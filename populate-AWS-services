# Create services - these will fail if the service already exists
doorstop add -n AWS SVC
doorstop add -n AWSRDS SVC
doorstop add -n AWSFARGATE SVC
doorstop add -n AWSS3 SVC
doorstop add -n AWSEKS SVC
doorstop add -n AWSALB SVC
doorstop add -n AWSLAMBDA SVC
doorstop add -n AWSAPIGATEWAY SVC
doorstop add -n AWSAVAILABILITYZONE SVC
doorstop add -n AWSREGION SVC
doorstop add -n AWSNEPTUNE SVC
doorstop add -n AWSCOGNITO SVC
doorstop add -n AWSSAGEMAKER SVC
doorstop add -n AWSDYNAMODB SVC
doorstop add -n AWSELASTICACHE SVC
doorstop add -n AWSSECRETSMANAGER SVC
doorstop add -n AWSWAF SVC
doorstop add -n AWSNETWORKFIREWALL SVC
doorstop add -n AWSKMS SVC

# Populate descriptions
DS_PATH='./items/svcs'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon S3
  ## Object storage built to store and retrieve any amount of data from anywhere
  
  Amazon Simple Storage Service (Amazon S3) is an object storage service that offers industry-leading scalability, data availability, security, and performance. This means customers of all sizes and industries can use it to store and protect any amount of data for a range of use cases, such as data lakes, websites, mobile applications, backup and restore, archive, enterprise applications, IoT devices, and big data analytics. Amazon S3 provides easy-to-use management features so you can organize your data and configure finely-tuned access controls to meet your specific business, organizational, and compliance requirements. Amazon S3 is designed for 99.999999999% (11 9's) of durability, and stores data for millions of applications for companies all around the world.
  
  <https://aws.amazon.com/s3/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSS3.yml

SVCDESCRIPTION=$(cat <<-END
|
  # Amazon Relational Database Service (RDS)
  ## Set up, operate, and scale a relational database in the cloud with just a few clicks.
  
  Amazon Relational Database Service (Amazon RDS) makes it easy to set up, operate, and scale a relational database in the cloud. It provides cost-efficient and resizable capacity while automating time-consuming administration tasks such as hardware provisioning, database setup, patching and backups. It frees you to focus on your applications so you can give them the fast performance, high availability, security and compatibility they need.
  
  <https://aws.amazon.com/rds/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSRDS.yml

SVCDESCRIPTION=$(cat <<-END
|
  # AWS Fargate
  ## Serverless compute for containers
  
  Deploy and manage your applications, not infrastructure. Fargate removes the operational overhead of scaling, patching, securing, and managing servers.
  
  Monitor your applications via built-in integrations with AWS services like Amazon CloudWatch Container Insights. Gather metrics and logs with third-party tools.
  
  Improve security through workload isolation by design. Amazon ECS tasks and Amazon EKS pods run in their own dedicated runtime environment.
  
  Only pay for what you use. Fargate scales the compute to closely match your specified resource requirements. With Fargate, there is no over-provisioning and paying for additional servers.
  
  <https://aws.amazon.com/fargate/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSFARGATE.yml

SVCDESCRIPTION=$(cat <<-END
|
  # Amazon Elastic Kubernetes Service (EKS)
  ## The most trusted way to start, run, and scale Kubernetes
  
  Explore multiple ways to configure VPC, ALB, EC2 Kubernetes worker nodes, and Amazon EKS.
  Reduce costs with efficient compute resource provisioning and automatic Kubernetes application scaling.
  Ensure a more secure Kubernetes environment with security patches automatically applied to your cluster’s control plane.
  
  <https://aws.amazon.com/eks/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSEKS.yml

SVCDESCRIPTION=$(cat <<-END
|
  # Elastic Load Balancing
  ## Distribute network traffic to improve application scalability
  
  Secure your applications with integrated certificate management, user-authentication, and SSL/TLS decryption.
  Deliver applications with high availability and automatic scaling.
  Monitor the health and performance of your applications in real time, uncover bottlenecks, and maintain SLA compliance.
  
  <https://aws.amazon.com/elasticloadbalancing/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSALB.yml

SVCDESCRIPTION=$(cat <<-END
|
  # AWS Lambda
  ## Run code without thinking about servers or clusters
  
  Run code without provisioning or managing infrastructure. Simply write and upload code as a .zip file or container image.
  Automatically respond to code execution requests at any scale, from a dozen events per day to hundreds of thousands per second.
  Save costs by paying only for the compute time you use—by per-millisecond—instead of provisioning infrastructure upfront for peak capacity.
  Optimize code execution time and performance with the right function memory size. Respond to high demand in double-digit milliseconds with Provisioned Concurrency.
  
  <https://aws.amazon.com/lambda/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSLAMBDA.yml

SVCDESCRIPTION=$(cat <<-END
|
  # Amazon API Gateway
  ## Create, maintain, and secure APIs at any scale
  
  Amazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. APIs act as the "front door" for applications to access data, business logic, or functionality from your backend services. Using API Gateway, you can create RESTful APIs and WebSocket APIs that enable real-time two-way communication applications. API Gateway supports containerized and serverless workloads, as well as web applications.

  API Gateway handles all the tasks involved in accepting and processing up to hundreds of thousands of concurrent API calls, including traffic management, CORS support, authorization and access control, throttling, monitoring, and API version management. API Gateway has no minimum fees or startup costs. You pay for the API calls you receive and the amount of data transferred out and, with the API Gateway tiered pricing model, you can reduce your cost as your API usage scales.
  
  <https://aws.amazon.com/api-gateway/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' $DS_PATH/SVC-AWSAPIGATEWAY.yml

SVCNAME='AWSNEPTUNE'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon Neptune
  ## Build and run graph applications with highly connected datasets
  
  Build and run identity, knowledge, fraud graph, and other applications with performance, and execute more than 100,000 queries per second.
  Deploy high performance graph applications using popular open-source APIs such as Gremlin, openCypher and SPARQL, and easily migrate existing applications.
  Operate graph databases without worrying about hardware provisioning, software patching, setup, configuration, or backups; and pay no upfront licensing costs.
  
  <https://aws.amazon.com/neptune/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSCOGNITO'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon Cognito
  ## Simple and Secure User Sign-Up, Sign-In, and Access Control
  
  Amazon Cognito lets you add user sign-up, sign-in, and access control to your web and mobile apps quickly and easily. Amazon Cognito scales to millions of users and supports sign-in with social identity providers, such as Apple, Facebook, Google, and Amazon, and enterprise identity providers via SAML 2.0 and OpenID Connect.  
  
  <https://aws.amazon.com/cognito/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSSAGEMAKER'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon SageMaker

  Amazon SageMaker helps data scientists and developers to prepare, build, train, and deploy high-quality machine learning (ML) models quickly by bringing together a broad set of capabilities purpose-built for ML.
  
  <https://aws.amazon.com/sagemaker/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSDYNAMODB'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon DynamoDB
  ## Fast, flexible NoSQL database service for single-digit millisecond performance at any scale

  Deliver apps with consistent single-digit millisecond performance, nearly unlimited throughput and storage, and automatic multi-region replication.
  Secure your data with encryption at rest, automatic backup and restore, and guaranteed reliability with an SLA of up to 99.999% availability.
  Focus on innovation and optimize costs with a fully managed serverless database that automatically scales up and down to fit your needs.
  Integrate with AWS services to do more with your data. Use built-in tools to perform analytics, extract insights, and monitor traffic trends.
  
  
  <https://aws.amazon.com/dynamodb/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSELASTICACHE'
SVCDESCRIPTION=$(cat <<-END
|
  # Amazon ElastiCache
  ## Unlock microsecond latency and scale with in-memory caching

  Boost application performance, reducing latency to microseconds.
  Scale with just a few clicks to meet the needs of your most demanding, internet-scale applications.
  Reduce costs and eliminate the operational overhead of self-managed caching.
  Build with your choice of Redis or Memcached, two popular open-source caching technologies.
  
  
  <https://aws.amazon.com/elasticache/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSSECRETSMANAGER'
SVCDESCRIPTION=$(cat <<-END
|
  # AWS Secrets Manager Documentation

  AWS Secrets Manager helps you to securely encrypt, store, and retrieve credentials for your databases and other services. Instead of hardcoding credentials in your apps, you can make calls to Secrets Manager to retrieve your credentials whenever needed. Secrets Manager helps you protect access to your IT resources and data by enabling you to rotate and manage access to your secrets.
  
  
  <https://aws.amazon.com/secretsmanager/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSWAF'
SVCDESCRIPTION=$(cat <<-END
|
  # AWS WAF Documentation

  AWS WAF is a web application firewall that lets you monitor web requests that are forwarded to Amazon CloudFront distributions or an Application Load Balancer. You can also use AWS WAF to block or allow requests based on conditions that you specify, such as the IP addresses that requests originate from or values in the requests.
  
  
  <https://aws.amazon.com/waf/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSNETWORKFIREWALL'
SVCDESCRIPTION=$(cat <<-END
|
  # AWS Network Firewall
  ## Deploy network security across your Amazon VPCs with just a few clicks

  AWS Network Firewall is a managed service that makes it easy to deploy essential network protections for all of your Amazon Virtual Private Clouds (VPCs). The service can be setup with just a few clicks and scales automatically with your network traffic, so you don't have to worry about deploying and managing any infrastructure. AWS Network Firewall’s flexible rules engine lets you define firewall rules that give you fine-grained control over network traffic, such as blocking outbound Server Message Block (SMB) requests to prevent the spread of malicious activity. You can also import rules you’ve already written in common open source rule formats as well as enable integrations with managed intelligence feeds sourced by AWS partners. AWS Network Firewall works together with AWS Firewall Manager so you can build policies based on AWS Network Firewall rules and then centrally apply those policies across your VPCs and accounts.

  AWS Network Firewall includes features that provide protections from common network threats. AWS Network Firewall’s stateful firewall can incorporate context from traffic flows, like tracking connections and protocol identification, to enforce policies such as preventing your VPCs from accessing domains using an unauthorized protocol. AWS Network Firewall’s intrusion prevention system (IPS) provides active traffic flow inspection so you can identify and block vulnerability exploits using signature-based detection. AWS Network Firewall also offers web filtering that can stop traffic to known bad URLs and monitor fully qualified domain names.

  It’s easy to get started with AWS Network Firewall by visiting the Amazon VPC Console to create or import your firewall rules, group them into policies, and apply them to the VPCs you want to protect. AWS Network Firewall pricing is based on the number of firewalls deployed and the amount of traffic inspected. There are no upfront commitments and you pay only for what you use.
  
  
  <https://aws.amazon.com/network-firewall/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml

SVCNAME='AWSKMS'
SVCDESCRIPTION=$(cat <<-END
|
  # AWS Key Management Service (KMS)
  ## Easily create and control the keys used to encrypt or digitally sign your data

  AWS Key Management Service (KMS) makes it easy for you to create and manage cryptographic keys and control their use across a wide range of AWS services and in your applications. AWS KMS is a secure and resilient service that uses hardware security modules that have been validated under FIPS 140-2, or are in the process of being validated, to protect your keys. AWS KMS is integrated with AWS CloudTrail to provide you with logs of all key usage to help meet your regulatory and compliance needs.
  
  
  <https://aws.amazon.com/kms/>
END
) \
yq eval -i '.text = env(SVCDESCRIPTION)' ${DS_PATH}/SVC-${SVCNAME}.yml